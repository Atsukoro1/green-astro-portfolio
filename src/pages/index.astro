---
import { getCollection } from 'astro:content';

import FormattedDate from '../components/FormattedDate.astro';
import Button from '../components/Button.astro';
import Badge from '../components/Badge.astro';
import Page from '../components/Page.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<Page title='Jakub Dorničák / Homepage' description='Homepage of my portfolio'>
	<main>
		<header>
			<h1 class="text-lime-500 text-7xl font-bold">Jakub Dorničák</h1>
			<Badge text='Fullstack Web developer & Cybersecurity enthusiast' />
			<div>
				<Button icon='mdi:linkedin' intent="primary">Button 1</Button>
				<Button intent="secondary">Button 2</Button>
			</div>

			<h3>Available on:</h3>
			<div class="flex flex-row gap-2">
				<Button icon="mdi:linkedin" />
				<Button icon="mdi:github" />
			</div>
		</header>

		<section>
			<h2>My projects</h2>
		</section>

		<section>
			<h2>Blog posts</h2>
			<ul>
				{
					posts.map((post) => (
						<li>
							<a href={`/blog/${post.slug}/`}>
								<img width={300} height={150} src={post.data.heroImage} alt="" />
								<h4 class="title">{post.data.title}</h4>
								<p class="date">
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</Page>
